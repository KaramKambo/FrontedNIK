---
toc: false
comments: false
layout: post
title: OOP, CSSE mini project Part 2
description: Building Game Levels
type: ccc
courses: { csse: {week: 14} }
---

## OOP, Game Levels
Using the hierarchy below, the start screen, game screens, and game-over screens have been created.

### Asset Setup

```javascript
assets: {
    obstacles: {
    tube: { src: "/images/platformer/obstacles/tube.png" },
    coin: { src: "/images/platformer/obstacles/coin.png"},
    tree: { src: "/images/platformer/obstacles/tree.png"}
    },
    platforms: {
    grass: { src: "/images/platformer/platforms/grass.png" },
    alien: { src: "/images/platformer/platforms/alien.png" },
    bricks: { src: "/images/platformer/platforms/brick_wall.png" },
    block: { src: "/images/platformer/platforms/brick_block.png" }, //MAY need 3 new variables: sizeRatio, widthRatio, and heightRatio
    itemBlock: {
        src: "/images/platformer/platforms/mario_block_spritesheet_v2.png",
        sizeRatio: 83.2,
        widthRatio: 0.5,
        heightRatio: 1.0,
        width: 204,
        height: 204,
        scaleSize: 80,
        speedRatio: 0.7,
    }
    },
```

### Level Setup
Each level has a tag, background, platform, player, and callback function.  These attributes will be extended over time.  Immediately, it is very apparent that the description is missing elements like enemies and objects in the game.  But, this progressive structure, enables Game Control to cycle from level to level on callback completion detection. 

- start/home sequence contains the entry screen of the game, this level could contain all game setup: player choice, speed, and leader board.
- hills would contain classic Mario game level(s)
- alien would contain adapted/personalized game level(s)
- game over should contain logic for persistence, saving state in local storage, resuming at point, and starting over, ...  

```javascript
// GameObject(s), the order is important to z-index...
{ name: 'mountains', id: 'background', class: BackgroundMountains,  data: this.assets.backgrounds.mountains },
{ name: 'clouds', id: 'background', class: BackgroundClouds, data: this.assets.backgrounds.clouds },
{ name: 'hills', id: 'background', class: BackgroundHills, data: this.assets.backgrounds.hills },
{ name: 'grass', id: 'platform', class: Platform, data: this.assets.platforms.grass },
{ name: 'blocks', id: 'jumpPlatform', class: BlockPlatform, data: this.assets.platforms.block, xPercentage: 0.2, yPercentage: 0.85 },
{ name: 'blocks', id: 'jumpPlatform', class: BlockPlatform, data: this.assets.platforms.block, xPercentage: 0.2368, yPercentage: 0.85 },
{ name: 'blocks', id: 'jumpPlatform', class: BlockPlatform, data: this.assets.platforms.block, xPercentage: 0.2736, yPercentage: 0.85 },
{ name: 'blocks', id: 'jumpPlatform', class: BlockPlatform, data: this.assets.platforms.block, xPercentage: 0.6, yPercentage: 1 },
{ name: 'itemBlock', id: 'jumpPlatform', class: JumpPlatform, data: this.assets.platforms.itemBlock, xPercentage: 0.4, yPercentage: 0.65 }, //item block is a platform
{ name: 'goomba', id: 'goomba', class: Goomba, data: this.assets.enemies.goomba, xPercentage: 0.3, yPercentage: 1, minPosition: 0.05},
{ name: 'goomba', id: 'goomba', class: Goomba, data: this.assets.enemies.goomba, xPercentage:  0.5, yPercentage: 1, minPosition: 0.3 },
{ name: 'mushroom', id: 'mushroom', class: Mushroom, data: this.assets.enemies.mushroom, xPercentage: 0.09},
{ name: 'mushroom', id: 'mushroom', class: Mushroom, data: this.assets.enemies.mushroom, xPercentage: 0.49},
{ name: 'goombaSpecial', id: 'goomba', class: Goomba, data: this.assets.enemies.goomba, xPercentage:  0.75, yPercentage: 1, minPosition: 0.5 }, //this special name is used for random event 2 to make sure that only one of the Goombas ends the random event
{ name: 'coin', id: 'coin', class: Coin, data: this.assets.obstacles.coin, xPercentage: 0.1908, yPercentage: 0.75 },
{ name: 'coin', id: 'coin', class: Coin, data: this.assets.obstacles.coin, xPercentage: 0.2242, yPercentage: 0.75 },
{ name: 'coin', id: 'coin', class: Coin, data: this.assets.obstacles.coin, xPercentage: 0.2575, yPercentage: 0.75 },
{ name: 'coin', id: 'coin', class: Coin, data: this.assets.obstacles.coin, xPercentage: 0.5898, yPercentage: 0.900 },
{ name: 'mario', id: 'player', class: Player, data: this.assets.players.mario },
{ name: 'tube', id: 'tube', class: Tube, data: this.assets.obstacles.tube },
{ name: 'loading', id: 'background', class: BackgroundTransitions,  data: this.assets.backgrounds.loading },
];
// Hills Game Level added to the GameEnv ...
new GameLevel( {tag: "hills", callback: this.playerOffScreenCallBack, objects: hillsGameObjects } );
```

### Callbacks

The callback on the level currently supports the advancement indicator.  The callback is continually monitored in a game loop. 

- store game status or game state to local storage
- capturing events in the game that accumulate and store points
The below code is considered dummy code and is looking for purposeful implementation.  The callback is likely different for each gameplay level.

```javascript
// Level completion tester
function testerCallBack() {
    // console.log(GameEnv.player?.x)
    if (GameEnv.player?.x > 500) {
        return true;
    } else {
        return false;
    }
}
```

### Game Play

After creating GameLevel, the game begins by starting the gameLoop.

```javascript
// start game
GameControl.gameLoop();
```

## Hacks: Next Steps

This "Hacks" is focused on student lessons and learning.  It is believed that the structure of the game so far is flexible and scalable.  

All (software) engineering is a progressive set of tasks, a series of designs, coding, tests, and failures. Each progression may spawn new features, adapt the current design and evolve the requirements of the game (levels).  

Student Teaching tasks allow each person to adapt or extend the game.  As you work with other student teaching teams, you will cooperatively extend and grow this project.
